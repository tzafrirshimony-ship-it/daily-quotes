<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>העצמה יומית</title>
    
    <!-- הגדרות PWA לאייפון ואנדרואיד -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#4f46e5">
    <link rel="manifest" href="data:application/manifest+json,{'name':'העצמה יומית','short_name':'העצמה','display':'standalone','background_color':'#ffffff','theme_color':'#4f46e5','icons':[{'src':'https://cdn-icons-png.flaticon.com/512/3233/3233497.png','sizes':'512x512','type':'image/png'}]}">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3233/3233497.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Assistant', sans-serif; background-color: #f8fafc; }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px -10px rgba(79, 70, 229, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .gradient-btn {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            transition: transform 0.2s;
        }
        .gradient-btn:active { transform: scale(0.96); }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6 bg-gradient-to-br from-indigo-50 to-purple-50">

    <div class="w-full max-w-sm glass-card rounded-[2rem] p-8 text-center relative overflow-hidden">
        
        <!-- כותרת -->
        <header class="mb-8">
            <div class="inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-indigo-100 text-indigo-600 mb-4 shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.344l-.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" />
                </svg>
            </div>
            <h1 class="text-3xl font-black text-slate-800 tracking-tight">העצמה יומית</h1>
            <p id="date-display" class="text-sm text-slate-400 font-bold mt-1"></p>
        </header>

        <!-- אזור המשפט היומי -->
        <div class="min-h-[160px] flex items-center justify-center mb-8 relative">
            <span class="absolute top-0 right-0 text-6xl text-indigo-100 -z-10 font-serif">"</span>
            <p id="quote-text" class="text-xl md:text-2xl font-bold text-slate-700 leading-relaxed"></p>
            <span class="absolute bottom-0 left-0 text-6xl text-indigo-100 -z-10 font-serif">"</span>
        </div>

        <!-- כפתורים -->
        <div class="space-y-3">
            <!-- כפתור היומן - הפתרון לבעיית ההתראות -->
            <div id="calendar-section" class="bg-indigo-50 p-4 rounded-2xl border border-indigo-100">
                <label class="block text-[11px] font-bold text-indigo-400 mb-2 uppercase tracking-wide">קבל תזכורת יומית קבועה</label>
                <div class="flex gap-2">
                    <input type="time" id="time-picker" class="bg-white border border-indigo-200 text-indigo-800 text-lg font-bold rounded-xl px-3 py-2 outline-none w-28 text-center shadow-sm">
                    <button onclick="addToCalendar()" class="flex-1 gradient-btn text-white font-bold rounded-xl text-sm shadow-lg shadow-indigo-200 flex items-center justify-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        הוסף ליומן
                    </button>
                </div>
                <p class="text-[10px] text-slate-400 mt-2">יוצר אירוע חוזר ביומן גוגל שלך</p>
            </div>

            <button onclick="shareQuote()" class="w-full bg-white text-slate-700 font-bold py-3 rounded-xl border border-slate-200 hover:bg-slate-50 transition active:scale-95 flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                </svg>
                שתף בוואטסאפ
            </button>
        </div>
    </div>

    <script>
        const quotes = [
            "הדרך היחידה לעשות עבודה נהדרת היא לאהוב את מה שאתה עושה.",
            "העתיד שייך לאלו המאמינים ביופי של החלומות שלהם.",
            "כל יום הוא הזדמנות שנייה.",
            "אל תספור את הימים, גרום לימים להיספר.",
            "ההצלחה היא לא סופית, והכישלון אינו גורלי.",
            "מה שאתה עושה היום יכול לשפר את כל המחרים שלך.",
            "אל תחכה להזדמנות, צור אותה.",
            "השינוי מתחיל בך.",
            "גם מסע של אלף מייל מתחיל בצעד אחד קטן.",
            "תאמין שאתה יכול, ואתה כבר בחצי הדרך.",
            "אתה חזק יותר ממה שאתה חושב.",
            "תהיה אדיב לעצמך.",
            "היום הוא יום מצוין להתחלה חדשה.",
            "האנרגיה שלך היא המגנט שלך."
        ];

        // אתחול
        const now = new Date();
        document.getElementById('date-display').innerText = now.toLocaleDateString('he-IL', { weekday: 'long', day: 'numeric', month: 'long' });
        
        // בחירת משפט לפי היום בשנה
        const start = new Date(now.getFullYear(), 0, 0);
        const diff = now - start;
        const dayIdx = Math.floor(diff / (1000 * 60 * 60 * 24));
        const dailyQuote = quotes[dayIdx % quotes.length];
        
        document.getElementById('quote-text').innerText = dailyQuote;
        
        // טעינת שעה שמורה (או ברירת מחדל)
        const savedTime = localStorage.getItem('calendarTime') || '08:00';
        document.getElementById('time-picker').value = savedTime;

        function addToCalendar() {
            const timeVal = document.getElementById('time-picker').value;
            localStorage.setItem('calendarTime', timeVal);
            
            const [hours, minutes] = timeVal.split(':');
            
            // הגדרת זמן התחלה (מחר)
            const startDate = new Date();
            startDate.setHours(parseInt(hours), parseInt(minutes), 0);
            if (startDate < new Date()) startDate.setDate(startDate.getDate() + 1);
            
            const endDate = new Date(startDate.getTime() + 10 * 60000); // 10 דקות משך אירוע

            // פונקציית עזר לפורמט גוגל (YYYYMMDDTHHMMSSZ)
            const formatGCalTime = (date) => {
                return date.toISOString().replace(/-|:|\.\d\d\d/g, "").slice(0,15) + "Z";
            };

            const startStr = formatGCalTime(startDate);
            const endStr = formatGCalTime(endDate);
            
            const title = encodeURIComponent("✨ רגע של העצמה יומית");
            const details = encodeURIComponent(`היכנס לקבלת המשפט היומי שלך:\n${window.location.href}`);
            
            // בניית הקישור עם חזרה יומית
            const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${title}&details=${details}&dates=${startStr}/${endStr}&recur=RRULE:FREQ=DAILY`;
            
            window.open(url, '_blank');
        }

        function shareQuote() {
            const text = `${dailyQuote}\n\nנשלח מאפליקציית העצמה יומית ✨\n${window.location.href}`;
            if (navigator.share) {
                navigator.share({ title: 'העצמה יומית', text: text, url: window.location.href });
            } else {
                window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
            }
        }
    </script>
</body>
</html>


