<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>העצמה יומית - מתוזמנת</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 20px;
        }
        .quote-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .locked-state {
            filter: blur(15px);
            user-select: none;
            pointer-events: none;
            opacity: 0.4;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="w-full max-w-md bg-white rounded-[2.5rem] p-8 quote-card text-center fade-in">
        <!-- בחירת שעה -->
        <div class="mb-6 pb-6 border-b border-gray-100">
            <label class="block text-sm font-bold text-gray-500 mb-2">מתי תרצה לקבל את המשפט?</label>
            <div class="flex gap-2 justify-center">
                <input type="time" id="reminder-time" class="bg-gray-50 border border-gray-200 rounded-xl px-4 py-2 text-lg focus:ring-2 focus:ring-blue-500 outline-none">
                <button onclick="saveSettings()" class="bg-blue-600 text-white px-4 py-2 rounded-xl font-bold hover:bg-blue-700 transition">שמור</button>
            </div>
        </div>

        <header class="mb-8">
            <div id="status-icon" class="w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg transition-colors duration-500">
                <svg id="icon-svg" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <h1 class="text-2xl font-bold text-gray-800 tracking-tight" id="app-title">ממתין לשעה הנכונה...</h1>
            <p id="date-display" class="text-sm font-medium text-gray-400 mt-1"></p>
        </header>

        <main class="mb-10 min-h-[160px] flex items-center justify-center relative">
            <!-- הודעת נעילה -->
            <div id="lock-overlay" class="absolute inset-0 z-20 flex flex-col items-center justify-center">
                <div class="bg-white/80 p-4 rounded-2xl shadow-sm border border-gray-100">
                    <p class="text-blue-600 font-bold" id="lock-message">המשפט יתגלה בשעה שקבעת</p>
                </div>
            </div>
            
            <div id="quote-container" class="locked-state w-full">
                <p id="quote-text" class="text-xl md:text-2xl font-bold text-gray-700 leading-relaxed px-4"></p>
            </div>
        </main>

        <footer id="action-buttons" class="hidden space-y-3">
            <button onclick="shareQuote()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-md transition-all flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                </svg>
                שתף השראה
            </button>
        </footer>
    </div>

    <div id="toast" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-8 py-3 rounded-full opacity-0 transition-all duration-300 pointer-events-none text-sm font-bold">
        הגדרות נשמרו!
    </div>

    <script>
        // רשימת משפטים
        const quotes = [
            "הדרך היחידה לעשות עבודה נהדרת היא לאהוב את מה שאתה עושה.",
            "העתיד שייך לאלו המאמינים ביופי של החלומות שלהם.",
            "כל יום הוא הזדמנות שנייה.",
            "אל תספור את הימים, גרום לימים להיספר.",
            "ההצלחה היא לא סופית, והכישלון אינו גורלי.",
            "מה שאתה עושה היום יכול לשפר את כל המחרים שלך.",
            "אל תחכה להזדמנות, צור אותה.",
            "השמיים הם לא הגבול, הם רק ההתחלה.",
            "השינוי מתחיל בך.",
            "גם מסע של אלף מייל מתחיל בצעד אחד קטן.",
            "תאמין שאתה יכול, ואתה כבר בחצי הדרך.",
            "הדרך הכי טובה לחזות את העתיד היא ליצור אותו.",
            "אתה חזק יותר ממה שאתה חושב.",
            "תהיה אדיב לעצמך.",
            "ההצלחה היא היכולת לעבור מכישלון אחד למשנהו בלי לאבד את ההתלהבות."
        ];

        // פונקציה לשמירת הגדרות
        function saveSettings() {
            const timeVal = document.getElementById('reminder-time').value;
            if (timeVal) {
                localStorage.setItem('reminderTime', timeVal);
                showToast("השעה עודכנה בהצלחה!");
                updateUI();
            }
        }

        // עדכון ממשק המשתמש
        function updateUI() {
            const now = new Date();
            const currentHour = now.getHours().toString().padStart(2, '0');
            const currentMin = now.getMinutes().toString().padStart(2, '0');
            const currentTime = `${currentHour}:${currentMin}`;
            
            const savedTime = localStorage.getItem('reminderTime') || "08:00";
            document.getElementById('reminder-time').value = savedTime;

            // תאריך נוכחי
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            document.getElementById('date-display').innerText = now.toLocaleDateString('he-IL', options);

            // בחירת משפט לפי היום בשנה
            const startOfYear = new Date(now.getFullYear(), 0, 0);
            const diff = now - startOfYear;
            const dayIdx = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById('quote-text').innerText = quotes[dayIdx % quotes.length];

            // האם השעה הגיעה?
            if (currentTime >= savedTime) {
                unlockApp();
            } else {
                lockApp(savedTime);
            }
        }

        function unlockApp() {
            document.getElementById('quote-container').classList.remove('locked-state');
            document.getElementById('lock-overlay').classList.add('hidden');
            document.getElementById('action-buttons').classList.remove('hidden');
            document.getElementById('app-title').innerText = "ההשראה היומית שלך";
            document.getElementById('status-icon').className = "w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg transition-colors duration-500";
            document.getElementById('icon-svg').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />';
        }

        function lockApp(time) {
            document.getElementById('quote-container').classList.add('locked-state');
            document.getElementById('lock-overlay').classList.remove('hidden');
            document.getElementById('action-buttons').classList.add('hidden');
            document.getElementById('app-title').innerText = "עוד קצת סבלנות...";
            document.getElementById('lock-message').innerText = `המשפט יתגלה בשעה ${time}`;
            document.getElementById('status-icon').className = "w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg transition-colors duration-500";
            document.getElementById('icon-svg').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />';
        }

        async function shareQuote() {
            const text = document.getElementById('quote-text').innerText;
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'העצמה יומית',
                        text: `"${text}"`,
                        url: window.location.href
                    });
                } catch (e) {}
            }
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.style.opacity = '1';
            setTimeout(() => toast.style.opacity = '0', 2500);
        }

        // בדיקה כל 30 שניות
        window.onload = updateUI;
        setInterval(updateUI, 30000);
    </script>
</body>
</html>
